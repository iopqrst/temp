<!DOCTYPE html>
<!-- saved from url=(0039)http://test.miaov.com/h5/2-3/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>妙味课堂-探索未知、拨云见日</title>
<meta name="viewport" content="width=640,target-densityDpi=device-dpi, user-scalable=no">
<style>
*{ margin:0; padding:0;}
body{ font-family:Tahoma,Arial,Roboto,"Droid Sans","Helvetica Neue","Droid Sans Fallback","Heiti SC",sans-self; }
li{ list-style:none;}
img{ display:block }
#main{ width:640px; overflow:hidden; position:relative;}
#ul1{ width:100%; height:100%; -webkit-perspective:800;}
#ul1 li{ width:100%; height:100%; position:absolute; top:0; left:0; display:none; z-index:1; -webkit-transform-origin:bottom;}
#ul1 li img:nth-of-type(1){ -webkit-transform:scale(1.5);}
#ul1 li img:nth-of-type(2){ -webkit-transform:translate(0,200px); opacity:0;}
#ul1 li img:nth-of-type(3){ position:absolute; display:none;} 
#c1{position:absolute; left:0; top:0; z-index:10;}
@-webkit-keyframes title{
    0%{-webkit-transform:scale(1); opacity:0;}
    20%{-webkit-transform:scale(1); opacity:0.5;}
    100%{-webkit-transform:scale(1.2); opacity:0;}
}
#arrow{width:28px; height:16px; background:url(img/arr.png) no-repeat; position:absolute; bottom:70px; left:50%; margin-left:-14px; z-index:3; -webkit-transform: translate(0,42px); -webkit-animation:arrowTop 1.5s infinite;}
#numPage{ width:100%; text-align:center; position:absolute; bottom:20px; font-size:26px; color:#666;}
@-webkit-keyframes arrowTop{
	0%{-webkit-transform: translate(0,42px); opacity: 0;}
	60%{-webkit-transform: translate(0,12px); opacity: 1;}
	100%{-webkit-transform: translate(0,0); opacity: 0;}
}
#div1{ width:100%; height:100%;position:absolute; left:0; top:0; z-index:15;}
.lx img:nth-child(1){ position:absolute; left:500px; top:500px; -webkit-animation:liuxing 3s linear infinite; height:20px; -webkit-transform-origin:0 0;}
.lx img:nth-child(2){ position:absolute; left:200px; top:500px; -webkit-animation:liuxing 5s linear infinite; -webkit-transform-origin:0 0;}
.lx img:nth-child(3){ position:absolute; left:500px; top:300px; -webkit-animation:liuxing 7s linear infinite; -webkit-transform-origin:0 0;}
.lx img:nth-child(4){ position:absolute; left:600px; top:700px; -webkit-animation:liuxing 4s linear infinite; -webkit-transform-origin:0 0;}
@-webkit-keyframes liuxing{
    0%{-webkit-transform:rotate(-45deg) translate(0) scaleX(0); opacity:0;}
    50%{-webkit-transform:rotate(-45deg) translate(-300px)  scaleX(1); opacity:1;}
    100%{-webkit-transform:rotate(-45deg) translate(-500px) scaleX(0); opacity:0;}
}
#img1{ position:absolute; top:20%; left:50%; width:100px; height:100px; margin-left:-50px; -webkit-animation:shan 1s linear infinite;}
@-webkit-keyframes shan{
    0%{ opacity:1;}
    50%{ opacity:0.6;}
    100%{opacity:1;}
}
#text1{ position:absolute; top:40%; left:50%; width:348px; height:200px; margin-left:-174px; }
#text2{ position:absolute; top:40%; left:50%; width:418px; height:390px; margin-left:-209px; opacity:0;}
#music{width:14px; height:14px; background:url(img/musicon.gif); position:absolute; right:20px; bottom:20px; z-index:9; overflow:hidden; -webkit-transform:scale(2);}

#loading{ width:100%; height:100%; background:black;position:absolute; left:0; top:0; z-index:20;}
.spinner { width:40px; height:40px; position:fixed; top:45%; left:50%; margin-left:-20px;}
#loading span{ position:fixed; top:55%; width:100%; text-align:center; color:white; font-size:40px;}
.container2 > div, .container3 > div { width:12px; height:12px; background-color: #fff; border-radius:50%; position:absolute; -webkit-animation:loadingRun 1.2s infinite ease-in-out;}
@-webkit-keyframes loadingRun{
  0%, 80%, 100% { -webkit-transform: scale(0.0) }
  40% { -webkit-transform: scale(1.0) }
}
.spinner .spinner-container { position:absolute; width:100%; height:100%;}
.container2{ -webkit-transform: rotateZ(45deg); }
.container3{-webkit-transform: rotateZ(90deg);}
.circle1{ top: 0; left: 0; }
.circle2{ top: 0; right: 0; }
.circle3{ right: 0; bottom: 0; }
.circle4{ left: 0; bottom: 0; }
.container2 .circle1{-webkit-animation-delay: -1.1s;}
.container3 .circle1{-webkit-animation-delay: -1.0s;}
.container2 .circle2{-webkit-animation-delay: -0.9s;}
.container3 .circle2{-webkit-animation-delay: -0.8s;}
.container2 .circle3{-webkit-animation-delay: -0.7s;}
.container3 .circle3{-webkit-animation-delay: -0.5s;}
.container2 .circle4{-webkit-animation-delay: -0.3s;}
.container3 .circle4{-webkit-animation-delay: -0.1s;}
#cImg{ position:absolute;left:0;top:0;width:100%;height:100%; z-index:9;}
</style>
<script src="jquery-2.1.3.min.js"></script>
<script>
$(document).on('touchmove',
function(a) {
    a.preventDefault()
});
$(function() {
    var k = $(window).height();
    var l = $('#ul1').find('li');
    $('#main').css('height', k);
    loadImg();
    beginScene();
    slideCanvas();
    slideImg();
    function slideCanvas() {
        var b = $('#c1');
        var c = b.get(0).getContext('2d');
        b.attr('height', k);
        var d = new Image();
        var e = new Image();
        d.src = 'img/a.jpg';
        e.src = 'img/Touch4.png';
        var f = null;
        var g = 0;
        d.onload = function() {
            c.drawImage(d, 0, 0, 640, k);
            b.on('touchstart',
            function(a) {
                $("#cImg").css("display", "none");
                c.globalCompositeOperation = 'destination-out';
                clearInterval(f);
                m.inAn(0);
                musicShow();
                f = setInterval(function() {
                    var i = g % 4;
                    var j = Math.floor(g / 4);
                    c.drawImage(e, i * 254, j * 400, 254, 400, 0, 0, 640, k);
                    g++;
                    if (g == 19) {
                        clearInterval(f);
                        b.remove()
                    }
                },
                100)
            })
        }
    }
    function slideImg() {
        var e = 0;
        var f = 0;
        var g = 0;
        var h = true;
        $('#numPage').html((g + 1) + '/' + l.length);
        l.on('touchstart',
        function(c) {
            if (h) {
                h = false;
                var d = c.originalEvent.changedTouches[0];
                e = d.pageY;
                f = $(this).index();
                $(this).on('touchend.drag',
                function(a) {
                    var b = a.originalEvent.changedTouches[0];
                    if (b.pageY - e < 0) {
                        g = f == l.length - 1 ? 0 : f + 1;
                        l.eq(g).css('transform', 'rotateX(-50deg)');
                        l.eq(g).show().css('opacity', 0);
                        l.eq(f).css('transition', 'all 1s linear');
                        setTimeout(function() {
                            l.eq(f).css('transform', 'rotateX(90deg)');
                            l.eq(f).css('opacity', 0);
                            l.eq(g).css('transition', 'all 1s linear');
                            l.eq(g).css('transform', 'rotateX(0deg)');
                            l.eq(g).css('opacity', 1)
                        },
                        100)
                    } else if (b.pageY - e > 0) {
                        g = f == 0 ? l.length - 1 : f - 1;
                        l.eq(g).css('transform', 'rotateX(90deg)');
                        l.eq(g).show().css('opacity', 0);
                        l.eq(f).css('transition', 'all 1s linear');
                        setTimeout(function() {
                            l.eq(f).css('transform', 'rotateX(-50deg)');
                            l.eq(f).css('opacity', 0);
                            l.eq(g).css('transition', 'all 1s linear');
                            l.eq(g).css('transform', 'rotateX(0deg)');
                            l.eq(g).css('opacity', 1)
                        },
                        100)
                    } else {
                        h = true
                    }
                    $(this).off('.drag');
                    $('#numPage').html((g + 1) + '/' + l.length)
                })
            }
        });
        l.on('webkitTransitionEnd',
        function(a) {
            if (!l.is(a.target)) {
                return
            }
            resetFn();
            m.inAn(g);
            m.outAn(f)
        });
        function resetFn() {
            h = true;
            l.css('transition', '');
            l.css('transform', '');
            l.eq(g).siblings().hide()
        }
    }
    var m = {
        outAn: function(a) {
            var b = l.eq(a).find('img');
            b.eq(0).css('transform', 'scale(1.5)');
            b.eq(1).css('transform', 'translate(0,200px)');
            b.eq(1).css('opacity', 0);
            b.eq(2).hide();
            b.eq(2).css('-webkit-animation', '')
        },
        inAn: function(a) {
            var b = l.eq(a).find('img');
            b.eq(0).css('transform', 'scale(1)');
            b.eq(0).css('transition', 'all 1s');
            b.eq(1).css('transform', 'translate(0,0)');
            b.eq(1).css('opacity', 1);
            b.eq(1).css('transition', 'all 1s .5s');
            b.eq(1).on('webkitTransitionEnd',
            function() {
                b.eq(2).show();
                b.eq(2).css('-webkit-animation', 'title 2s infinite')
            })
        }
    };
    function beginScene() {
        $('#text1').css('webkitAnimation', 'shan 1s linear infinite');
        $('#text1').on('webkitAnimationIteration',
        function(a) {
            if (a.originalEvent.elapsedTime == 4) {
                $('#text1').css('webkitAnimation', '');
                $('#text1').css('display', 'none');
                $('#text2').css('webkitAnimation', 'shan 1s linear infinite')
            }
        });
        $('#div1').on('touchstart',
        function() {
            $(this).remove();
            $('#c1').trigger('touchstart')
        })
    }
    function musicShow() {
        var a = $('#music').find('audio').get(0);
        a.play();
        $('#music').off().on('touchstart',
        function() {
            if (a.paused) {
                a.play();
                $('#music').css('background', 'url(img/musicon.gif)')
            } else {
                a.pause();
                $('#music').css('background', 'url(img/musicoff.gif)')
            }
        })
    }
    function loadImg() {
        var c = ['a.jpg', 'img3.jpg', 'img4.jpg', 'img5.jpg', 'img6.jpg', 'img7.jpg', 'img8.jpg', 'img9.jpg', 'img10.jpg', 'text3.jpg', 'text4.jpg', 'text5.jpg', 'text6.jpg', 'text7.jpg', 'text8.jpg', 'text9.jpg', 'text10.jpg', 'sun.png', 't1.png', 't2.png', 'Touch4.png'];
        var d = 0;
        $.each(c,
        function(i, a) {
            var b = new Image();
            b.src = 'img/' + a;
            b.onload = function() {
                d++;
                if (d == c.length) {
                    $('#loading').animate({
                        opacity: 0
                    },
                    1000,
                    function() {
                        $(this).remove()
                    })
                }
            };
            b.error = function() {
                $('#loading').animate({
                    opacity: 0
                },
                1000,
                function() {
                    $(this).remove()
                })
            }
        })
    }
});
</script>
</head>

<body>
<img src="logo.jpg" style="position:absolute; top:-9999px; left:-9999px;">
<div id="main" style="height: 1138px;">
	
	<div id="div1">
    	<img id="img1" src="sun.png">
        <img id="text1" src="t1.png" style="display: none;">
        <img id="text2" src="t2.png" style="-webkit-animation: shan 1s linear infinite;">
        <div class="lx">
            <img src="lx.png">
            <img src="lx.png">
            <img src="lx.png">
            <img src="lx.png">
        </div>
    </div>
    <img src="a.jpg" id="cImg">
	<canvas id="c1" width="640" height="1138"></canvas>
    <ul id="ul1">
    	<li style="display:block">
        	<img src="img3.jpg">
            <img src="text3.jpg">
            <img src="title3.png" style="left:90px; top:530px;">
        </li>
        <li>
        	<img src="img4.jpg">
            <img src="text4.jpg">
            <img src="title4.png" style="left:153px; top:498px;">
        </li>
        <li>
        	<img src="img5.jpg">
            <img src="text5.jpg">
            <img src="title5.png" style="left:225px; top:708px;">
        </li>
        <li>
        	<img src="img6.jpg">
            <img src="text6.jpg">
            <img src="title6.png" style="left:154px; top:522px;">
        </li>
        <li>
        	<img src="img7.jpg">
            <img src="text7.jpg">
            <img src="title7.png" style="left:195px; top:733px;">
        </li>
        <li>
        	<img src="img8.jpg">
            <img src="text8.jpg">
            <img src="title8.png" style="left:51px; top:522px;">
        </li>
        <li>
        	<img src="img9.jpg">
            <img src="text9.jpg">
            <img src="title9.png" style="left:236px; top:530px;">
        </li>
        <li>
        	<img src="img10.jpg">
            <img src="text10.jpg">
            <img src="title10.png" style="left:232px; top:525px;">
        </li>
    </ul>
    <div id="arrow"></div>
    <div id="numPage">1/8</div>
    <div id="music">
    	<audio loop="" src="img/music.mp3" preload="" style="display:none;"></audio>
    </div>
</div>


</body></html>