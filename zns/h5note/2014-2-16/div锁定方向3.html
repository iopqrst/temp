<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="智能社 - zhinengshe.com" />
<meta name="copyright" content="智能社 - zhinengshe.com" />
<meta name="description" content="智能社是一家专注于web前端开发技术的公司，目前主要提供JavaScript培训和HTML5培训两项服务，同时还推出了大量javascript基础知识教程，智能课堂为你带来全新的学习方法和快乐的学习体验。" />
<title>智能社— http://www.zhinengshe.com</title>
<meta name="viewport" content="width=320, user-scalable=0, initial-scale=1">
<style>
#div1{ width:100px; height:100px; background:red; position:absolute; left:100px; top:100px;}
</style>
<script>
document.addEventListener('DOMContentLoaded',function(){
	var oDiv=document.querySelector('#div1');
	
	var x=0;
	var y=0;
	var bDir='';
	oDiv.addEventListener('touchstart',function(ev){
		var disX=ev.targetTouches[0].pageX-x;
		var disY=ev.targetTouches[0].pageY-y;
		
		var downX=ev.targetTouches[0].pageX;
		var downY=ev.targetTouches[0].pageY;
		
		function fnMove(ev){
			if(bDir){ //
				if(bDir=='l'){
					x=ev.targetTouches[0].pageX-disX;
					oDiv.style.WebkitTransform='translateX('+x+'px)';	
				}
				if(bDir=='t'){
					y=ev.targetTouches[0].pageY-disY;
					oDiv.style.WebkitTransform='translateY('+y+'px)';		
				}
			}else{ //定方向
				if(Math.abs(ev.targetTouches[0].pageX-downX)>10){
					bDir='l';	
				}else if(Math.abs(ev.targetTouches[0].pageY-downY)>10){
					bDir='t';			
				}
			}
		}
		
		function fnEnd(){
			oDiv.removeEventListener('touchmove',fnMove,false);
			oDiv.removeEventListener('touchend',fnEnd,false);	
			bDir='';
		}
		oDiv.addEventListener('touchmove',fnMove,false);
		oDiv.addEventListener('touchend',fnEnd,false);
	},false);
},false);
</script>
</head>

<body>
<div id="div1"></div>
</body>
</html>
